@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Battleship Index</h2>
<canvas id="myCanvas" width="1000" height="1000" style="border:1px solid #d3d3d3;"></canvas>

<script>

    var elem = document.getElementById('myCanvas'),
    elemLeft = elem.offsetLeft,
    elemTop = elem.offsetTop,
    context = elem.getContext('2d'),
    elements = [];


 $(document).ready($.getJSON("/api/Load", function (data) {
        //alert(data.player1.board.tiles[0].id);
     $.each(data.player1.board.tiles, function (index, element) {
         context.fillStyle = 'grey'
         context.fillRect(element.x, element.y, 100, 100);
     });


     // Add event listener for `click` events.
     elem.addEventListener('click', function (event) {
         var x = event.pageX - elemLeft,
             y = event.pageY - elemTop;

         // Collision detection between clicked offset and element.
         $.each(data.player1.board.tiles, function (index, element) {
             if (y > element.x && y < element.x + 100
                 && x > element.y && x < element.y + 100) {
                 alert('clicked an element');
             }
         });

     }, false);
        }));

</script>

